{"version":3,"file":"8.29858c43.js","sources":["../../../../../../src/routes/s/+page.ts","../../../../../../src/routes/s/+page.svelte"],"sourcesContent":["// since there's no dynamic data here, we can prerender\n// it so that it gets served as a static asset in production\nexport const ssr = false;\nexport const prerender = true;\n\nexport async function load({ url }) { \n\tlet q = url.searchParams.get('q') || undefined;\n\tlet addr = url.searchParams.get('addr') || undefined;\n\treturn { q, addr };\n}","<script>\n\timport { page } from '$app/stores';\n\timport { goto } from '$app/navigation';\n\timport arrow_down from '$lib/images/arrow_down.svg';\n\timport month from '$lib/images/month.svg';\n\timport wallet from '$lib/images/wallet.svg';\n\timport lock_clock from '$lib/images/lock_clock.svg';\n  import banner from '$lib/images/banner.svg';\n\timport chart from '$lib/images/chart.svg';\n\timport table from '$lib/images/table.svg';\n\timport share from '$lib/images/share.svg';\n\timport { _ } from 'svelte-i18n';\n\timport { toast } from '@zerodevx/svelte-toast';\n\timport CopyToClipboard from '$lib/CopyToClipboard.svelte';\n\timport {\n\t\tbinToBase64,\n\t\tbase64ToBin,\n\t\tlockingBytecodeToCashAddress,\n\t\tcashAddressToLockingBytecode\n\t} from '@bitauth/libauth';\n\timport { Perpetuity, sanitizeAddress } from '@unspent/phi';\n\timport { deflate, inflate } from 'pako';\n\timport ContractChartSection from '$lib/ContractChartSection.svelte';\n\timport UtxoSection from '$lib/UtxoSection.svelte';\n\n\texport let data;\n\texport let p;\n\tlet balance;\n\tlet utxoCount;\n\tlet receiptAddress;\n\tlet contract;\n\tlet receiptAddressValid = false;\n\n\tif (data.q) {\n\t\tif (!receiptAddress) {\n\t\t\tlet bytecode = inflate(base64ToBin(encodeURI(data.q)));\n\t\t\treceiptAddress = lockingBytecodeToCashAddress(bytecode);\n\t\t\treceiptAddressValid = true;\n\t\t\tcreateContract(false);\n\t\t}\n\t}\n\n\tasync function createContract(save = true) {\n\t\tif (receiptAddress) {\n\t\t\ttry {\n\t\t\t\ttry {\n\t\t\t\t\treceiptAddress = await sanitizeAddress(receiptAddress);\n\t\t\t\t\treceiptAddressValid = true;\n\t\t\t\t} catch (e) {\n\t\t\t\t\treceiptAddressValid = false;\n\t\t\t\t\tif (e.message) {\n\t\t\t\t\t\ttoast.push(e.message, { classes: ['warn'] });\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoast.push(e, { classes: ['warn'] });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcontract = new Perpetuity(4383, receiptAddress, 1500, 96);\n\t\t\t\tupdateBalance();\n\n\t\t\t\tlet bytecode = cashAddressToLockingBytecode(receiptAddress).bytecode;\n\t\t\t\tlet q = decodeURI(binToBase64(deflate(bytecode)));\n\t\t\t\t$page.url.searchParams.set('q', q);\n\n\t\t\t\tgoto(`?${$page.url.searchParams.toString()}`);\n\t\t\t} catch (e) {\n\t\t\t\tcontract = undefined;\n\n\t\t\t\tif (e.message) {\n\t\t\t\t\ttoast.push(e.message, { classes: ['warn'] });\n\t\t\t\t} else {\n\t\t\t\t\ttoast.push(e, { classes: ['warn'] });\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tcontract = undefined;\n\t\t\tbalance = undefined;\n\t\t}\n\t}\n\n\tconst updateBalance = async () => {\n\t\tif (contract) balance = await contract.getBalance();\n\t\tif (contract) utxoCount = (await contract.getUtxos()).length;\n\t};\n</script>\n\n<svelte:head>\n\t<title>unspent.cash</title>\n\t<meta name=\"description\" content=\"Unspent Cash\" />\n</svelte:head>\n<h4><img src={share} alt=\"share\" /></h4>\n<section>\n\t<table>\n\t\t<tr>\n\t\t\t<td colspan=\"4\"> <h1>unspent.cash</h1></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t{#if contract}\n\t\t\t\t<td style=\"text-align: center;\">\n\t\t\t\t\t<img width=\"125px\" src={banner} />\n\t\t\t\t</td>\n\t\t\t\t<td colspan=\"3\">\n\t\t\t\t\t<CopyToClipboard on:copy={() => toast.push('ðŸ“‹ðŸ—¸')} text={contract.getAddress()} let:copy>\n\t\t\t\t\t\t<div style=\"max-width: 80%;\"  class=\"action\">\n\t\t\t\t\t\t\t<button on:click={copy}>\n\t\t\t\t\t\t\t\t{contract.getAddress()}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</CopyToClipboard>\n\t\t\t\t</td>\n\t\t\t{:else}\n\t\t\t\t<td style=\"text-align: center;\">\n\t\t\t\t\t<img width=\"125px\" src={banner} />\n\t\t\t\t</td>\n\t\t\t\t<td colspan=\"3\"><b> {$_('create')}</b></td>\n\t\t\t{/if}\n\t\t</tr>\n\t\t<tr>\n\t\t\t{#if balance}\n\t\t\t\t<td />\n\t\t\t\t<td style=\"width:30px;\">\n\t\t\t\t\t<img src={lock_clock} alt=\"lock_clock\" />\n\t\t\t\t</td>\n\t\t\t\t<td colspan=\"2\">\n\t\t\t\t\t<b>{balance.toLocaleString()}</b> sats <br />\n\t\t\t\t\t(<i\n\t\t\t\t\t\t>{(Number(balance) / 100000000).toLocaleString(undefined, {\n\t\t\t\t\t\t\tminimumSignificantDigits: 6\n\t\t\t\t\t\t})}</i\n\t\t\t\t\t> BCH)\n\t\t\t\t</td>\n\t\t\t{:else}\n\t\t\t\t<td />\n\t\t\t\t<td style=\"width:30px;\">\n\t\t\t\t\t<img src={lock_clock} alt=\"lock_clock\" />\n\t\t\t\t</td>\n\t\t\t\t<td colspan=\"2\" />\n\t\t\t{/if}\n\t\t</tr>\n\t\t{#if receiptAddressValid}\n\t\t\t<tr>\n\t\t\t\t<td />\n\t\t\t\t<td>\n\t\t\t\t\t<p><img src={arrow_down} alt=\"to\" /></p>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<b>1.04% month</b>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<b>11.8% year</b>\n\t\t\t\t\t</p>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<img src={month} alt=\"month\" />\n\t\t\t\t\t</p>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t{/if}\n\t\t<tr>\n\t\t\t<td />\n\t\t\t<td style=\"width=30px;\">\n\t\t\t\t<p>\n\t\t\t\t\t<img src={wallet} alt=\"wallet\" />\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td style=\"line-break:anywhere;\" colspan=\"2\">\n\t\t\t\t<p>\n\t\t\t\t\t{#if receiptAddress}\n\t\t\t\t\t\t{receiptAddress}\n\t\t\t\t\t{/if}\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t\n\t</table>\n\t\n</section>\n<hr />\n<h4><img src={table} alt=\"table\" /></h4>\n<UtxoSection {receiptAddress} />\n<hr />\n<h4><img src={chart} alt=\"chart\" /></h4>\n<ContractChartSection {receiptAddress} />\n\n<style>\n\tsection {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tflex: 0.6;\n\t\tline-break: anywhere;\n\t}\n\n\t#form1 {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tflex: 0.6;\n\t}\n\n\ttable {\n\t\tborder: 1mm ridge rgba(192, 50, 220, 0.6);\n\t\tbackground-color: white;\n\t}\n\ttable tr td {\n\t\tmin-width: 10%;\n\t\tjustify-content: space-around;\n\t}\n\n\ttable tr td p {\n\t\tfont-size: small;\n\t\tdisplay: flex;\n\t\tjustify-content: space-around;\n\t}\n\n\ttable tr td pre {\n\t\twhite-space: pre-wrap;\n\t}\n\n\th1 {\n\t\twidth: 100%;\n\t\tfont-weight: 900;\n\t\tcolor: #d99b22;\n\t}\n\n</style>\n"],"names":["ssr","prerender","load","url","q","addr","banner","t1_value","ctx","insert_hydration","target","td0","anchor","td1","append_hydration","b","dirty","set_data","t1","copytoclipboard_changes","t_value","div","button","is_function","t","lock_clock","td2","t2_value","br","i","t2","t5","t5_value","textContent","arrow_down","month","tr","share","wallet","table","chart","create_if_block_2","create_if_block_1","create_if_block","meta","h40","section","table_1","tr0","tr1","tr2","tr3","td3","p1","hr0","h41","hr1","h42","data","$$props","p","balance","receiptAddress","contract","receiptAddressValid","bytecode","inflate","base64ToBin","lockingBytecodeToCashAddress","createContract","save","sanitizeAddress","$$invalidate","e","toast","Perpetuity","updateBalance","cashAddressToLockingBytecode","binToBase64","deflate","$page","goto"],"mappings":"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"}